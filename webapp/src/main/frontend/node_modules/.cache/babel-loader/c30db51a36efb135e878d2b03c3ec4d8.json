{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport * as React from 'react';\nimport { useEffect, useState } from 'react';\nimport inflection from 'inflection';\nimport { EditBase, InferredElement, useResourceContext, useEditContext, getElementsFromRecords } from 'ra-core';\nimport { EditView } from './EditView';\nimport { editFieldTypes } from './editFieldTypes';\nexport var EditGuesser = function (props) {\n  var resource = props.resource,\n    id = props.id,\n    mutationMode = props.mutationMode,\n    mutationOptions = props.mutationOptions,\n    queryOptions = props.queryOptions,\n    redirect = props.redirect,\n    transform = props.transform,\n    disableAuthentication = props.disableAuthentication,\n    rest = __rest(props, [\"resource\", \"id\", \"mutationMode\", \"mutationOptions\", \"queryOptions\", \"redirect\", \"transform\", \"disableAuthentication\"]);\n  return React.createElement(EditBase, {\n    resource: resource,\n    id: id,\n    mutationMode: mutationMode,\n    mutationOptions: mutationOptions,\n    queryOptions: queryOptions,\n    redirect: redirect,\n    transform: transform,\n    disableAuthentication: disableAuthentication\n  }, React.createElement(EditViewGuesser, __assign({}, rest)));\n};\nvar EditViewGuesser = function (props) {\n  var resource = useResourceContext(props);\n  var record = useEditContext().record;\n  var _a = useState(null),\n    child = _a[0],\n    setChild = _a[1];\n  var _b = props.enableLog,\n    enableLog = _b === void 0 ? process.env.NODE_ENV === 'development' : _b,\n    rest = __rest(props, [\"enableLog\"]);\n  useEffect(function () {\n    setChild(null);\n  }, [resource]);\n  useEffect(function () {\n    if (record && !child) {\n      var inferredElements = getElementsFromRecords([record], editFieldTypes);\n      var inferredChild = new InferredElement(editFieldTypes.form, null, inferredElements);\n      setChild(inferredChild.getElement());\n      if (!enableLog) return;\n      var representation = inferredChild.getRepresentation();\n      var components = ['Edit'].concat(Array.from(new Set(Array.from(representation.matchAll(/<([^/\\s>]+)/g)).map(function (match) {\n        return match[1];\n      }).filter(function (component) {\n        return component !== 'span';\n      })))).sort();\n      // eslint-disable-next-line no-console\n      console.log(\"Guessed Edit:\\n\\nimport { \".concat(components.join(', '), \" } from 'react-admin';\\n\\nexport const \").concat(inflection.capitalize(inflection.singularize(resource)), \"Edit = () => (\\n    <Edit>\\n\").concat(representation, \"\\n    </Edit>\\n);\"));\n    }\n  }, [record, child, resource, enableLog]);\n  return React.createElement(EditView, __assign({}, rest), child);\n};\nEditViewGuesser.propTypes = EditView.propTypes;","map":{"version":3,"names":["React","useEffect","useState","inflection","EditBase","InferredElement","useResourceContext","useEditContext","getElementsFromRecords","EditView","editFieldTypes","EditGuesser","props","resource","id","mutationMode","mutationOptions","queryOptions","redirect","transform","disableAuthentication","rest","__rest","createElement","EditViewGuesser","__assign","record","_a","child","setChild","_b","enableLog","process","env","NODE_ENV","inferredElements","inferredChild","form","getElement","representation","getRepresentation","components","concat","Array","from","Set","matchAll","map","match","filter","component","sort","console","log","join","capitalize","singularize","propTypes"],"sources":["../../../src/detail/EditGuesser.tsx"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}