{"ast":null,"code":"import debounce from 'lodash/debounce';\n/**\n * A version of lodash/debounce that always returns a promise but wait for the debounced function to return to resolve it.\n * @param func The function to debounce\n * @param wait The debounce delay\n * @returns A debounced function that returns a promise\n */\nexport function asyncDebounce(func, wait) {\n  var resolveSet = new Set();\n  var rejectSet = new Set();\n  var debounced = debounce(function (args) {\n    func.apply(void 0, args).then(function () {\n      var res = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        res[_i] = arguments[_i];\n      }\n      resolveSet.forEach(function (resolve) {\n        return resolve.apply(void 0, res);\n      });\n    }).catch(function () {\n      var res = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        res[_i] = arguments[_i];\n      }\n      rejectSet.forEach(function (reject) {\n        return reject.apply(void 0, res);\n      });\n    }).finally(function () {\n      resolveSet.clear();\n      rejectSet.clear();\n    });\n  }, wait);\n  return function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments[_i];\n    }\n    return new Promise(function (resolve, reject) {\n      resolveSet.add(resolve);\n      rejectSet.add(reject);\n      debounced(args);\n    });\n  };\n}","map":{"version":3,"names":["debounce","asyncDebounce","func","wait","resolveSet","Set","rejectSet","debounced","args","apply","then","res","_i","arguments","length","forEach","resolve","catch","reject","finally","clear","Promise","add"],"sources":["../../../src/util/asyncDebounce.ts"],"sourcesContent":[null],"mappings":"AAAA,OAAOA,QAAQ,MAAM,iBAAiB;AAEtC;;;;;;AAMA,OAAM,SAAUC,aAAaA,CAE3BC,IAAkB,EAAEC,IAAa;EAC/B,IAAMC,UAAU,GAAG,IAAIC,GAAG,EAAoB;EAC9C,IAAMC,SAAS,GAAG,IAAID,GAAG,EAAoB;EAE7C,IAAME,SAAS,GAAGP,QAAQ,CAAC,UAACQ,IAA8B;IACtDN,IAAI,CAAAO,KAAA,SAAID,IAAI,EACPE,IAAI,CAAC;MAAC,IAAAC,GAAA;WAAA,IAAAC,EAAA,IAAM,EAANA,EAAA,GAAAC,SAAA,CAAAC,MAAM,EAANF,EAAA,EAAM;QAAND,GAAA,CAAAC,EAAA,IAAAC,SAAA,CAAAD,EAAA;;MACHR,UAAU,CAACW,OAAO,CAAC,UAAAC,OAAO;QAAI,OAAAA,OAAO,CAAAP,KAAA,SAAIE,GAAG;MAAd,CAAe,CAAC;IAClD,CAAC,CAAC,CACDM,KAAK,CAAC;MAAC,IAAAN,GAAA;WAAA,IAAAC,EAAA,IAAM,EAANA,EAAA,GAAAC,SAAA,CAAAC,MAAM,EAANF,EAAA,EAAM;QAAND,GAAA,CAAAC,EAAA,IAAAC,SAAA,CAAAD,EAAA;;MACJN,SAAS,CAACS,OAAO,CAAC,UAAAG,MAAM;QAAI,OAAAA,MAAM,CAAAT,KAAA,SAAIE,GAAG;MAAb,CAAc,CAAC;IAC/C,CAAC,CAAC,CACDQ,OAAO,CAAC;MACLf,UAAU,CAACgB,KAAK,EAAE;MAClBd,SAAS,CAACc,KAAK,EAAE;IACrB,CAAC,CAAC;EACV,CAAC,EAAEjB,IAAI,CAAC;EAER,OAAO;IAAC,IAAAK,IAAA;SAAA,IAAAI,EAAA,IAAiC,EAAjCA,EAAA,GAAAC,SAAA,CAAAC,MAAiC,EAAjCF,EAAA,EAAiC;MAAjCJ,IAAA,CAAAI,EAAA,IAAAC,SAAA,CAAAD,EAAA;;IACJ,WAAIS,OAAO,CAAC,UAACL,OAAO,EAAEE,MAAM;MACxBd,UAAU,CAACkB,GAAG,CAACN,OAAO,CAAC;MACvBV,SAAS,CAACgB,GAAG,CAACJ,MAAM,CAAC;MACrBX,SAAS,CAACC,IAAI,CAAC;IACnB,CAAC,CAA6B;EAJ9B,CAI8B;AACtC","ignoreList":[]},"metadata":{},"sourceType":"module"}