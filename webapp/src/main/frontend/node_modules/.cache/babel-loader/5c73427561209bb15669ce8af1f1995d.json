{"ast":null,"code":"import { useEffect, useRef } from 'react';\nimport { useFormState } from 'react-hook-form';\nimport { useNotify } from '../notification';\n/**\n * This hook display an error message on submit in Form and SaveButton.\n *\n * We can't do the form validity check in the form submit handler\n * as the form state may not have been updated yet when onSubmit validation mode is enabled\n * or when the form hasn't been touched at all.\n */\nexport var useNotifyIsFormInvalid = function (control, enabled) {\n  if (enabled === void 0) {\n    enabled = true;\n  }\n  var _a = useFormState(control ? {\n      control: control\n    } : undefined),\n    submitCount = _a.submitCount,\n    errors = _a.errors;\n  var submitCountRef = useRef(submitCount);\n  var notify = useNotify();\n  useEffect(function () {\n    // Checking the submit count allows us to only display the notification after users\n    // tried to submit\n    if (submitCount > submitCountRef.current && enabled) {\n      submitCountRef.current = submitCount;\n      if (Object.keys(errors).length > 0) {\n        notify('ra.message.invalid_form', {\n          type: 'error'\n        });\n      }\n    }\n  }, [errors, submitCount, notify, enabled]);\n};","map":{"version":3,"names":["useEffect","useRef","useFormState","useNotify","useNotifyIsFormInvalid","control","enabled","_a","undefined","submitCount","errors","submitCountRef","notify","current","Object","keys","length","type"],"sources":["../../../src/form/useNotifyIsFormInvalid.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,SAAS,EAAEC,MAAM,QAAQ,OAAO;AACzC,SAASC,YAAY,QAAiB,iBAAiB;AACvD,SAASC,SAAS,QAAQ,iBAAiB;AAE3C;;;;;;;AAOA,OAAO,IAAMC,sBAAsB,GAAG,SAAAA,CAClCC,OAAiB,EACjBC,OAAuB;EAAvB,IAAAA,OAAA;IAAAA,OAAA,OAAuB;EAAA;EAEjB,IAAAC,EAAA,GAA0BL,YAAY,CACxCG,OAAO,GAAG;MAAEA,OAAO,EAAAA;IAAA,CAAE,GAAGG,SAAS,CACpC;IAFOC,WAAW,GAAAF,EAAA,CAAAE,WAAA;IAAEC,MAAM,GAAAH,EAAA,CAAAG,MAE1B;EACD,IAAMC,cAAc,GAAGV,MAAM,CAACQ,WAAW,CAAC;EAC1C,IAAMG,MAAM,GAAGT,SAAS,EAAE;EAE1BH,SAAS,CAAC;IACN;IACA;IACA,IAAIS,WAAW,GAAGE,cAAc,CAACE,OAAO,IAAIP,OAAO,EAAE;MACjDK,cAAc,CAACE,OAAO,GAAGJ,WAAW;MAEpC,IAAIK,MAAM,CAACC,IAAI,CAACL,MAAM,CAAC,CAACM,MAAM,GAAG,CAAC,EAAE;QAChCJ,MAAM,CAAC,yBAAyB,EAAE;UAAEK,IAAI,EAAE;QAAO,CAAE,CAAC;;;EAGhE,CAAC,EAAE,CAACP,MAAM,EAAED,WAAW,EAAEG,MAAM,EAAEN,OAAO,CAAC,CAAC;AAC9C,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}