{"ast":null,"code":"import * as React from 'react';\nimport { useEffect, useRef } from 'react';\nimport { useInfinitePaginationContext, useListContext, useEvent } from 'ra-core';\nimport { Box, CircularProgress } from '@mui/material';\n/**\n * A pagination component that loads more results when the user scrolls to the bottom of the list.\n *\n * Used as the default pagination component in the <InfiniteList> component.\n *\n * @example\n * import { InfiniteList, InfinitePagination, Datagrid, TextField } from 'react-admin';\n *\n * const PostList = () => (\n *    <InfiniteList pagination={<InfinitePagination sx={{ py: 5 }} />}>\n *       <Datagrid>\n *          <TextField source=\"id\" />\n *         <TextField source=\"title\" />\n *      </Datagrid>\n *   </InfiniteList>\n * );\n */\nexport var InfinitePagination = function (_a) {\n  var _b = _a.options,\n    options = _b === void 0 ? defaultOptions : _b,\n    sx = _a.sx;\n  var isLoading = useListContext().isLoading;\n  var _c = useInfinitePaginationContext(),\n    fetchNextPage = _c.fetchNextPage,\n    hasNextPage = _c.hasNextPage,\n    isFetchingNextPage = _c.isFetchingNextPage;\n  if (!fetchNextPage) {\n    throw new Error('InfinitePagination must be used inside an InfinitePaginationContext, usually created by <InfiniteList>. You cannot use it as child of a <List> component.');\n  }\n  var observerElem = useRef(null);\n  var handleObserver = useEvent(function (entries) {\n    var target = entries[0];\n    if (target.isIntersecting && hasNextPage && !isFetchingNextPage) {\n      fetchNextPage();\n    }\n  });\n  useEffect(function () {\n    var element = observerElem.current;\n    if (!element) return;\n    var observer = new IntersectionObserver(handleObserver, options);\n    observer.observe(element);\n    return function () {\n      return observer.unobserve(element);\n    };\n  }, [fetchNextPage, hasNextPage, handleObserver, options, isLoading, isFetchingNextPage]);\n  if (isLoading) return null;\n  return React.createElement(Box, {\n    ref: observerElem,\n    py: 2,\n    textAlign: \"center\",\n    sx: sx\n  }, isFetchingNextPage && hasNextPage && React.createElement(CircularProgress, {\n    size: \"1.5em\"\n  }));\n};\nvar defaultOptions = {\n  threshold: 0\n};","map":{"version":3,"names":["React","useEffect","useRef","useInfinitePaginationContext","useListContext","useEvent","Box","CircularProgress","InfinitePagination","_a","_b","options","defaultOptions","sx","isLoading","_c","fetchNextPage","hasNextPage","isFetchingNextPage","Error","observerElem","handleObserver","entries","target","isIntersecting","element","current","observer","IntersectionObserver","observe","unobserve","createElement","ref","py","textAlign","size","threshold"],"sources":["../../../../src/list/pagination/InfinitePagination.tsx"],"sourcesContent":[null],"mappings":"AAAA,OAAO,KAAKA,KAAK,MAAM,OAAO;AAC9B,SAASC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AACzC,SACIC,4BAA4B,EAC5BC,cAAc,EACdC,QAAQ,QACL,SAAS;AAChB,SAASC,GAAG,EAAEC,gBAAgB,QAAiB,eAAe;AAE9D;;;;;;;;;;;;;;;;;AAiBA,OAAO,IAAMC,kBAAkB,GAAG,SAAAA,CAACC,EAGT;MAFtBC,EAAA,GAAAD,EAAA,CAAAE,OAAwB;IAAxBA,OAAO,GAAAD,EAAA,cAAGE,cAAc,GAAAF,EAAA;IACxBG,EAAE,GAAAJ,EAAA,CAAAI,EAAA;EAEM,IAAAC,SAAS,GAAKV,cAAc,EAAE,CAAAU,SAArB;EACX,IAAAC,EAAA,GAIFZ,4BAA4B,EAAE;IAH9Ba,aAAa,GAAAD,EAAA,CAAAC,aAAA;IACbC,WAAW,GAAAF,EAAA,CAAAE,WAAA;IACXC,kBAAkB,GAAAH,EAAA,CAAAG,kBACY;EAElC,IAAI,CAACF,aAAa,EAAE;IAChB,MAAM,IAAIG,KAAK,CACX,2JAA2J,CAC9J;;EAGL,IAAMC,YAAY,GAAGlB,MAAM,CAAC,IAAI,CAAC;EAEjC,IAAMmB,cAAc,GAAGhB,QAAQ,CAC3B,UAAAiB,OAAO;IACI,IAAAC,MAAM,GAAID,OAAO,GAAX;IACb,IAAIC,MAAM,CAACC,cAAc,IAAIP,WAAW,IAAI,CAACC,kBAAkB,EAAE;MAC7DF,aAAa,EAAE;;EAEvB,CAAC,CACJ;EAEDf,SAAS,CAAC;IACN,IAAMwB,OAAO,GAAGL,YAAY,CAACM,OAAO;IACpC,IAAI,CAACD,OAAO,EAAE;IACd,IAAME,QAAQ,GAAG,IAAIC,oBAAoB,CAACP,cAAc,EAAEV,OAAO,CAAC;IAClEgB,QAAQ,CAACE,OAAO,CAACJ,OAAO,CAAC;IACzB,OAAO;MAAM,OAAAE,QAAQ,CAACG,SAAS,CAACL,OAAO,CAAC;IAA3B,CAA2B;EAC5C,CAAC,EAAE,CACCT,aAAa,EACbC,WAAW,EACXI,cAAc,EACdV,OAAO,EACPG,SAAS,EACTI,kBAAkB,CACrB,CAAC;EAEF,IAAIJ,SAAS,EAAE,OAAO,IAAI;EAE1B,OACId,KAAA,CAAA+B,aAAA,CAACzB,GAAG;IAAC0B,GAAG,EAAEZ,YAAY;IAAEa,EAAE,EAAE,CAAC;IAAEC,SAAS,EAAC,QAAQ;IAACrB,EAAE,EAAEA;EAAE,GACnDK,kBAAkB,IAAID,WAAW,IAC9BjB,KAAA,CAAA+B,aAAA,CAACxB,gBAAgB;IAAC4B,IAAI,EAAC;EAAO,EACjC,CACC;AAEd,CAAC;AAED,IAAMvB,cAAc,GAAG;EAAEwB,SAAS,EAAE;AAAC,CAAE","ignoreList":[]},"metadata":{},"sourceType":"module"}