{"ast":null,"code":"var __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport * as React from 'react';\nimport { usePreference, useTranslate } from 'ra-core';\nimport { Box, Button } from '@mui/material';\nimport { FieldToggle } from './FieldToggle';\n/**\n * UI to select / deselect fields, and store the selection in preferences\n */\nexport var FieldsSelector = function (_a) {\n  var _b = _a.name,\n    name = _b === void 0 ? 'columns' : _b,\n    _c = _a.availableName,\n    availableName = _c === void 0 ? 'availableColumns' : _c;\n  var translate = useTranslate();\n  var _d = usePreference(availableName, []),\n    availableFields = _d[0],\n    setAvailableFields = _d[1];\n  var omit = usePreference('omit', [])[0];\n  var _e = usePreference(name, availableFields.filter(function (field) {\n      return !(omit === null || omit === void 0 ? void 0 : omit.includes(field.source));\n    }).map(function (field) {\n      return field.index;\n    })),\n    fields = _e[0],\n    setFields = _e[1];\n  var handleToggle = function (event) {\n    if (event.target.checked) {\n      // add the column at the right position\n      setFields(availableFields.filter(function (field) {\n        return field.index === event.target.name || fields.includes(field.index);\n      }).map(function (field) {\n        return field.index;\n      }));\n    } else {\n      setFields(fields.filter(function (index) {\n        return index !== event.target.name;\n      }));\n    }\n  };\n  var handleMove = function (index1, index2) {\n    var index1Pos = availableFields.findIndex(\n    // eslint-disable-next-line eqeqeq\n    function (field) {\n      return field.index == index1;\n    });\n    var index2Pos = availableFields.findIndex(\n    // eslint-disable-next-line eqeqeq\n    function (field) {\n      return field.index == index2;\n    });\n    if (index1Pos === -1 || index2Pos === -1) {\n      return;\n    }\n    var newAvailableFields;\n    if (index1Pos > index2Pos) {\n      newAvailableFields = __spreadArray(__spreadArray(__spreadArray(__spreadArray([], availableFields.slice(0, index2Pos), true), [availableFields[index1Pos]], false), availableFields.slice(index2Pos, index1Pos), true), availableFields.slice(index1Pos + 1), true);\n    } else {\n      newAvailableFields = __spreadArray(__spreadArray(__spreadArray(__spreadArray([], availableFields.slice(0, index1Pos), true), availableFields.slice(index1Pos + 1, index2Pos + 1), true), [availableFields[index1Pos]], false), availableFields.slice(index2Pos + 1), true);\n    }\n    setAvailableFields(newAvailableFields);\n    setFields(function (fields) {\n      return newAvailableFields.filter(function (field) {\n        return fields.includes(field.index);\n      }).map(function (field) {\n        return field.index;\n      });\n    });\n  };\n  var handleHideAll = function () {\n    setFields([]);\n  };\n  var handleShowAll = function () {\n    setFields(availableFields.map(function (field) {\n      return field.index;\n    }));\n  };\n  return React.createElement(Box, {\n    pt: 0.5\n  }, React.createElement(Box, {\n    component: \"ul\",\n    sx: {\n      paddingInlineStart: 0,\n      m: 0\n    }\n  }, availableFields.map(function (field) {\n    return React.createElement(FieldToggle, {\n      key: field.index,\n      source: field.source,\n      label: field.label,\n      index: field.index,\n      selected: fields.includes(field.index),\n      onToggle: handleToggle,\n      onMove: handleMove\n    });\n  })), React.createElement(Box, {\n    onDrop: function (e) {\n      return e.preventDefault();\n    },\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    mx: -0.5,\n    mt: 1\n  }, React.createElement(Button, {\n    size: \"small\",\n    onClick: handleHideAll\n  }, translate('ra.inspector.hideAll', {\n    _: 'Hide All'\n  })), React.createElement(Button, {\n    size: \"small\",\n    onClick: handleShowAll\n  }, translate('ra.inspector.showAll', {\n    _: 'Show All'\n  }))));\n};","map":{"version":3,"names":["React","usePreference","useTranslate","Box","Button","FieldToggle","FieldsSelector","_a","_b","name","_c","availableName","translate","_d","availableFields","setAvailableFields","omit","_e","filter","field","includes","source","map","index","fields","setFields","handleToggle","event","target","checked","handleMove","index1","index2","index1Pos","findIndex","index2Pos","newAvailableFields","__spreadArray","slice","handleHideAll","handleShowAll","createElement","pt","component","sx","paddingInlineStart","m","key","label","selected","onToggle","onMove","onDrop","e","preventDefault","display","justifyContent","mx","mt","size","onClick","_"],"sources":["../../../src/preferences/FieldsSelector.tsx"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}