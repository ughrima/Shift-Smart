{"ast":null,"code":"import * as React from 'react';\nimport { FieldTitle, useResourceContext } from 'ra-core';\nimport { Switch, Typography } from '@mui/material';\nimport DragIcon from '@mui/icons-material/DragIndicator';\nimport { styled } from '@mui/material/styles';\n/**\n * UI to enable/disable a field\n */\nexport var FieldToggle = function (props) {\n  var selected = props.selected,\n    label = props.label,\n    onToggle = props.onToggle,\n    onMove = props.onMove,\n    source = props.source,\n    index = props.index;\n  var resource = useResourceContext();\n  var dropIndex = React.useRef(null);\n  var x = React.useRef(null);\n  var y = React.useRef(null);\n  var handleDocumentDragOver = React.useCallback(function (event) {\n    x.current = event.clientX;\n    y.current = event.clientY;\n  }, []);\n  var handleDragStart = function () {\n    document.addEventListener('dragover', handleDocumentDragOver);\n  };\n  var handleDrag = function (event) {\n    // imperative DOM manipulations using the native Drag API\n    var selectedItem = event.target;\n    selectedItem.classList.add('drag-active');\n    var list = selectedItem.closest('ul');\n    var dropItem = document.elementFromPoint(x.current, y.current) === null ? selectedItem : document.elementFromPoint(x.current, y.current).closest('li');\n    if (!dropItem) {\n      return;\n    }\n    if (dropItem.classList.contains('dragIcon')) {\n      dropItem = dropItem.parentNode;\n    }\n    if (dropItem === selectedItem) {\n      return;\n    }\n    if (list === dropItem.parentNode.closest('ul')) {\n      dropIndex.current = dropItem.dataset.index;\n      if (dropItem === selectedItem.nextSibling) {\n        dropItem = dropItem.nextSibling;\n      }\n      list.insertBefore(selectedItem, dropItem);\n    }\n  };\n  var handleDragEnd = function (event) {\n    var selectedItem = event.target;\n    var list = selectedItem.closest('ul');\n    var dropItem = document.elementFromPoint(x.current, y.current) === null ? selectedItem : document.elementFromPoint(x.current, y.current).closest('li');\n    if (!dropItem) {\n      if (y.current > selectedItem.closest('ul').getBoundingClientRect().bottom) {\n        dropItem = list.lastChild;\n      } else {\n        dropItem = list.firstChild;\n      }\n    }\n    if (dropItem && list === dropItem.closest('ul')) {\n      onMove(selectedItem.dataset.index, dropIndex.current);\n    } else {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n    selectedItem.classList.remove('drag-active');\n    document.removeEventListener('dragover', handleDocumentDragOver);\n  };\n  var handleDragOver = function (event) {\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n  };\n  return React.createElement(Root, {\n    key: source,\n    draggable: onMove ? 'true' : undefined,\n    onDrag: onMove ? handleDrag : undefined,\n    onDragStart: onMove ? handleDragStart : undefined,\n    onDragEnd: onMove ? handleDragEnd : undefined,\n    onDragOver: onMove ? handleDragOver : undefined,\n    \"data-index\": index\n  }, React.createElement(\"label\", {\n    htmlFor: \"switch_\".concat(index)\n  }, React.createElement(Switch, {\n    checked: selected,\n    onChange: onToggle,\n    name: index,\n    id: \"switch_\".concat(index),\n    size: \"small\",\n    sx: {\n      mr: 0.5,\n      ml: -0.5\n    }\n  }), React.createElement(Typography, {\n    variant: \"body2\",\n    component: \"span\"\n  }, React.createElement(FieldTitle, {\n    label: label,\n    source: source,\n    resource: resource\n  }))), onMove && React.createElement(DragIcon, {\n    className: \"dragIcon\",\n    color: \"disabled\",\n    fontSize: \"small\"\n  }));\n};\nvar Root = styled('li', {\n  name: 'RaFieldToggle',\n  overridesResolver: function (_props, styles) {\n    return styles.root;\n  }\n})(function (_a) {\n  var theme = _a.theme;\n  return {\n    display: 'flex',\n    justifyContent: 'space-between',\n    paddingLeft: 0,\n    '& svg': {\n      cursor: 'move'\n    },\n    '&.drag-active': {\n      background: 'transparent',\n      color: 'transparent',\n      outline: \"1px solid \".concat(theme.palette.action.selected),\n      '& .MuiSwitch-root, & svg': {\n        visibility: 'hidden'\n      }\n    }\n  };\n});","map":{"version":3,"names":["React","FieldTitle","useResourceContext","Switch","Typography","DragIcon","styled","FieldToggle","props","selected","label","onToggle","onMove","source","index","resource","dropIndex","useRef","x","y","handleDocumentDragOver","useCallback","event","current","clientX","clientY","handleDragStart","document","addEventListener","handleDrag","selectedItem","target","classList","add","list","closest","dropItem","elementFromPoint","contains","parentNode","dataset","nextSibling","insertBefore","handleDragEnd","getBoundingClientRect","bottom","lastChild","firstChild","preventDefault","stopPropagation","remove","removeEventListener","handleDragOver","dataTransfer","dropEffect","createElement","Root","key","draggable","undefined","onDrag","onDragStart","onDragEnd","onDragOver","htmlFor","concat","checked","onChange","name","id","size","sx","mr","ml","variant","component","className","color","fontSize","overridesResolver","_props","styles","root","_a","theme","display","justifyContent","paddingLeft","cursor","background","outline","palette","action","visibility"],"sources":["../../../src/preferences/FieldToggle.tsx"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}