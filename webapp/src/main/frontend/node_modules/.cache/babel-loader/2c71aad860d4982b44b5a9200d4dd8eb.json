{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport TextField from '@mui/material/TextField';\nimport { useInput, FieldTitle } from 'ra-core';\nimport { sanitizeInputRestProps } from './sanitizeInputRestProps';\nimport { InputHelperText } from './InputHelperText';\n/**\n * Form input to edit a Date string value in the \"YYYY-MM-DD\" format (e.g. '2021-06-23').\n *\n * Renders a date picker (the exact UI depends on the browser).\n *\n * @example\n * import { Edit, SimpleForm, DateInput } from 'react-admin';\n *\n * const PostEdit = () => (\n *     <Edit>\n *         <SimpleForm>\n *             <DateInput source=\"published_at\" />\n *         </SimpleForm>\n *     </Edit>\n * );\n *\n * @example\n * // If the initial value is a Date object, DateInput converts it to a string\n * // but you must pass a custom parse method to convert the form value\n * // (which is always a date string) back to a Date object.\n * <DateInput source=\"published_at\" parse={val => new Date(val)} />\n */\nexport var DateInput = function (_a) {\n  var className = _a.className,\n    defaultValue = _a.defaultValue,\n    _b = _a.format,\n    format = _b === void 0 ? getStringFromDate : _b,\n    label = _a.label,\n    name = _a.name,\n    source = _a.source,\n    resource = _a.resource,\n    helperText = _a.helperText,\n    margin = _a.margin,\n    onBlur = _a.onBlur,\n    onChange = _a.onChange,\n    parse = _a.parse,\n    validate = _a.validate,\n    variant = _a.variant,\n    disabled = _a.disabled,\n    readOnly = _a.readOnly,\n    rest = __rest(_a, [\"className\", \"defaultValue\", \"format\", \"label\", \"name\", \"source\", \"resource\", \"helperText\", \"margin\", \"onBlur\", \"onChange\", \"parse\", \"validate\", \"variant\", \"disabled\", \"readOnly\"]);\n  var _c = useInput(__assign({\n      defaultValue: defaultValue,\n      name: name,\n      format: format,\n      parse: parse,\n      onBlur: onBlur,\n      onChange: onChange,\n      resource: resource,\n      source: source,\n      validate: validate,\n      disabled: disabled,\n      readOnly: readOnly\n    }, rest)),\n    field = _c.field,\n    fieldState = _c.fieldState,\n    formState = _c.formState,\n    id = _c.id,\n    isRequired = _c.isRequired;\n  var error = fieldState.error,\n    invalid = fieldState.invalid,\n    isTouched = fieldState.isTouched;\n  var isSubmitted = formState.isSubmitted;\n  var renderHelperText = helperText !== false || (isTouched || isSubmitted) && invalid;\n  return React.createElement(TextField, __assign({\n    id: id\n  }, field, {\n    className: clsx('ra-input', \"ra-input-\".concat(source), className),\n    type: \"date\",\n    size: \"small\",\n    variant: variant,\n    margin: margin,\n    error: (isTouched || isSubmitted) && invalid,\n    disabled: disabled || readOnly,\n    readOnly: readOnly,\n    helperText: renderHelperText ? React.createElement(InputHelperText, {\n      touched: isTouched || isSubmitted,\n      error: error === null || error === void 0 ? void 0 : error.message,\n      helperText: helperText\n    }) : null,\n    label: React.createElement(FieldTitle, {\n      label: label,\n      source: source,\n      resource: resource,\n      isRequired: isRequired\n    }),\n    InputLabelProps: defaultInputLabelProps\n  }, sanitizeInputRestProps(rest)));\n};\nDateInput.propTypes = {\n  label: PropTypes.oneOfType([PropTypes.string, PropTypes.bool, PropTypes.element]),\n  resource: PropTypes.string,\n  source: PropTypes.string\n};\n/**\n * Convert Date object to String\n *\n * @param {Date} value value to convert\n * @returns {String} A standardized date (yyyy-MM-dd), to be passed to an <input type=\"date\" />\n */\nvar convertDateToString = function (value) {\n  if (!(value instanceof Date) || isNaN(value.getDate())) return '';\n  var pad = '00';\n  var yyyy = value.getFullYear().toString();\n  var MM = (value.getMonth() + 1).toString();\n  var dd = value.getDate().toString();\n  return \"\".concat(yyyy, \"-\").concat((pad + MM).slice(-2), \"-\").concat((pad + dd).slice(-2));\n};\nvar dateRegex = /^\\d{4}-\\d{2}-\\d{2}$/;\nvar defaultInputLabelProps = {\n  shrink: true\n};\nvar getStringFromDate = function (value) {\n  // null, undefined and empty string values should not go through dateFormatter\n  // otherwise, it returns undefined and will make the input an uncontrolled one.\n  if (value == null || value === '') {\n    return '';\n  }\n  if (value instanceof Date) {\n    return convertDateToString(value);\n  }\n  // valid dates should not be converted\n  if (dateRegex.test(value)) {\n    return value;\n  }\n  return convertDateToString(new Date(value));\n};","map":{"version":3,"names":["React","PropTypes","clsx","TextField","useInput","FieldTitle","sanitizeInputRestProps","InputHelperText","DateInput","_a","className","defaultValue","_b","format","getStringFromDate","label","name","source","resource","helperText","margin","onBlur","onChange","parse","validate","variant","disabled","readOnly","rest","__rest","_c","__assign","field","fieldState","formState","id","isRequired","error","invalid","isTouched","isSubmitted","renderHelperText","createElement","concat","type","size","touched","message","InputLabelProps","defaultInputLabelProps","propTypes","oneOfType","string","bool","element","convertDateToString","value","Date","isNaN","getDate","pad","yyyy","getFullYear","toString","MM","getMonth","dd","slice","dateRegex","shrink","test"],"sources":["../../../src/input/DateInput.tsx"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}