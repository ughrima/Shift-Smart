{"ast":null,"code":"import * as React from 'react';\nimport { useCallback, useMemo, useState } from 'react';\nimport { styled } from '@mui/material/styles';\nimport PropTypes from 'prop-types';\nimport { useAuthProvider, useGetIdentity, useTranslate } from 'ra-core';\nimport { Tooltip, IconButton, Menu, Button, Avatar, useMediaQuery } from '@mui/material';\nimport AccountCircle from '@mui/icons-material/AccountCircle';\nimport { UserMenuContextProvider } from './UserMenuContextProvider';\nimport { Logout } from '../auth/Logout';\n/**\n * The UserMenu component renders a Mui Button that shows a Menu.\n * It accepts children that must be Mui MenuItem components.\n *\n * @example\n * import { Logout, UserMenu, useUserMenu } from 'react-admin';\n * import MenuItem from '@mui/material/MenuItem';\n * import ListItemIcon from '@mui/material/ListItemIcon';\n * import ListItemText from '@mui/material/ListItemText';\n * import SettingsIcon from '@mui/icons-material/Settings';\n\n * const ConfigurationMenu = React.forwardRef((props, ref) => {\n *     const { onClose } = useUserMenu();\n *     return (\n *         <MenuItem\n *             ref={ref}\n *             {...props}\n *             to=\"/configuration\"\n *             onClick={onClose}\n *         >\n *             <ListItemIcon>\n *                 <SettingsIcon />\n *             </ListItemIcon>\n *             <ListItemText>Configuration</ListItemText>\n *         </MenuItem>\n *     );\n * });\n *\n * export const MyUserMenu = () => (\n *     <UserMenu>\n *         <ConfigurationMenu />\n *         <Logout />\n *     </UserMenu>\n * );\n * @param props\n * @param {ReactNode} props.children React node/s to be rendered as children of the UserMenu. Must be Mui MenuItem components\n * @param {string} props.className CSS class applied to the MuiAppBar component\n * @param {string} props.label The label of the UserMenu button. Accepts translation keys\n * @param {Element} props.icon The icon of the UserMenu button.\n *\n */\nexport var UserMenu = function (props) {\n  var _a = useState(null),\n    anchorEl = _a[0],\n    setAnchorEl = _a[1];\n  var translate = useTranslate();\n  var _b = useGetIdentity(),\n    isLoading = _b.isLoading,\n    identity = _b.identity;\n  var authProvider = useAuthProvider();\n  var isLargeEnough = useMediaQuery(function (theme) {\n    return theme.breakpoints.up('sm');\n  });\n  var _c = props.children,\n    children = _c === void 0 ? !!authProvider ? React.createElement(Logout, null) : null : _c,\n    className = props.className,\n    _d = props.label,\n    label = _d === void 0 ? 'ra.auth.user_menu' : _d,\n    _e = props.icon,\n    icon = _e === void 0 ? defaultIcon : _e;\n  var handleMenu = function (event) {\n    return setAnchorEl(event.currentTarget);\n  };\n  var handleClose = useCallback(function () {\n    return setAnchorEl(null);\n  }, []);\n  var context = useMemo(function () {\n    return {\n      onClose: handleClose\n    };\n  }, [handleClose]);\n  if (!children) return null;\n  var open = Boolean(anchorEl);\n  return React.createElement(Root, {\n    className: className\n  }, isLargeEnough && !isLoading && (identity === null || identity === void 0 ? void 0 : identity.fullName) ? React.createElement(Button, {\n    \"aria-label\": label && translate(label, {\n      _: label\n    }),\n    className: UserMenuClasses.userButton,\n    color: \"inherit\",\n    startIcon: identity.avatar ? React.createElement(Avatar, {\n      className: UserMenuClasses.avatar,\n      src: identity.avatar,\n      alt: identity.fullName\n    }) : icon,\n    onClick: handleMenu,\n    variant: \"text\"\n  }, identity.fullName) : React.createElement(Tooltip, {\n    title: label && translate(label, {\n      _: 'Profile'\n    })\n  }, React.createElement(IconButton, {\n    \"aria-label\": label && translate(label, {\n      _: 'Profile'\n    }),\n    \"aria-owns\": open ? 'menu-appbar' : null,\n    \"aria-haspopup\": true,\n    color: \"inherit\",\n    onClick: handleMenu\n  }, !isLoading && (identity === null || identity === void 0 ? void 0 : identity.avatar) ? React.createElement(Avatar, {\n    className: UserMenuClasses.avatar,\n    src: identity.avatar,\n    alt: identity.fullName\n  }) : icon)), React.createElement(UserMenuContextProvider, {\n    value: context\n  }, React.createElement(Menu, {\n    id: \"menu-appbar\",\n    disableScrollLock: true,\n    anchorEl: anchorEl,\n    anchorOrigin: AnchorOrigin,\n    transformOrigin: TransformOrigin,\n    open: open,\n    onClose: handleClose\n  }, children)));\n};\nUserMenu.propTypes = {\n  children: PropTypes.node,\n  classes: PropTypes.object,\n  label: PropTypes.string,\n  icon: PropTypes.node\n};\nvar PREFIX = 'RaUserMenu';\nexport var UserMenuClasses = {\n  userButton: \"\".concat(PREFIX, \"-userButton\"),\n  avatar: \"\".concat(PREFIX, \"-avatar\")\n};\nvar Root = styled('div', {\n  name: PREFIX,\n  overridesResolver: function (props, styles) {\n    return styles.root;\n  }\n})(function (_a) {\n  var _b;\n  var theme = _a.theme;\n  return _b = {}, _b[\"& .\".concat(UserMenuClasses.userButton)] = {\n    textTransform: 'none',\n    marginInlineStart: theme.spacing(0.5)\n  }, _b[\"& .\".concat(UserMenuClasses.avatar)] = {\n    width: theme.spacing(3),\n    height: theme.spacing(3)\n  }, _b;\n});\nvar defaultIcon = React.createElement(AccountCircle, null);\nvar AnchorOrigin = {\n  vertical: 'bottom',\n  horizontal: 'right'\n};\nvar TransformOrigin = {\n  vertical: 'top',\n  horizontal: 'right'\n};","map":{"version":3,"names":["React","useCallback","useMemo","useState","styled","PropTypes","useAuthProvider","useGetIdentity","useTranslate","Tooltip","IconButton","Menu","Button","Avatar","useMediaQuery","AccountCircle","UserMenuContextProvider","Logout","UserMenu","props","_a","anchorEl","setAnchorEl","translate","_b","isLoading","identity","authProvider","isLargeEnough","theme","breakpoints","up","_c","children","createElement","className","_d","label","_e","icon","defaultIcon","handleMenu","event","currentTarget","handleClose","context","onClose","open","Boolean","Root","fullName","_","UserMenuClasses","userButton","color","startIcon","avatar","src","alt","onClick","variant","title","value","id","disableScrollLock","anchorOrigin","AnchorOrigin","transformOrigin","TransformOrigin","propTypes","node","classes","object","string","PREFIX","concat","name","overridesResolver","styles","root","textTransform","marginInlineStart","spacing","width","height","vertical","horizontal"],"sources":["../../../src/layout/UserMenu.tsx"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}