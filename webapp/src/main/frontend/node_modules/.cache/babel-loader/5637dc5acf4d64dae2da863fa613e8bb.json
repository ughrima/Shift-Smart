{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport get from 'lodash/get';\nimport { Typography } from '@mui/material';\nimport { styled } from '@mui/material/styles';\nimport ErrorIcon from '@mui/icons-material/Error';\nimport { useReference, ResourceContextProvider, RecordContextProvider, useRecordContext, useCreatePath, useGetRecordRepresentation, useResourceDefinition, useTranslate } from 'ra-core';\nimport { LinearProgress } from '../layout';\nimport { Link } from '../Link';\nimport { fieldPropTypes } from './types';\nimport { genericMemo } from './genericMemo';\n/**\n * Fetch reference record, and render its representation, or delegate rendering to child component.\n *\n * The reference prop should be the name of one of the <Resource> components\n * added as <Admin> child.\n *\n * @example // using recordRepresentation\n * <ReferenceField label=\"User\" source=\"userId\" reference=\"users\" />\n *\n * @example // using a Field component to represent the record\n * <ReferenceField label=\"User\" source=\"userId\" reference=\"users\">\n *     <TextField source=\"name\" />\n * </ReferenceField>\n *\n * @example // By default, includes a link to the <Edit> page of the related record\n * // (`/users/:userId` in the previous example).\n * // Set the `link` prop to \"show\" to link to the <Show> page instead.\n * <ReferenceField label=\"User\" source=\"userId\" reference=\"users\" link=\"show\" />\n *\n * @example // You can also prevent `<ReferenceField>` from adding link to children\n * // by setting `link` to false.\n * <ReferenceField label=\"User\" source=\"userId\" reference=\"users\" link={false} />\n *\n * @example // Alternatively, you can also pass a custom function to `link`.\n * // It must take reference and record as arguments and return a string\n * <ReferenceField label=\"User\" source=\"userId\" reference=\"users\" link={(record, reference) => \"/path/to/${reference}/${record}\"} />\n *\n * @default\n * In previous versions of React-Admin, the prop `linkType` was used. It is now deprecated and replaced with `link`. However\n * backward-compatibility is still kept\n */\nexport var ReferenceField = function (props) {\n  var source = props.source,\n    emptyText = props.emptyText,\n    _a = props.link,\n    link = _a === void 0 ? 'edit' : _a,\n    rest = __rest(props, [\"source\", \"emptyText\", \"link\"]);\n  var record = useRecordContext(props);\n  var id = get(record, source);\n  var translate = useTranslate();\n  return id == null ? emptyText ? React.createElement(Typography, {\n    component: \"span\",\n    variant: \"body2\"\n  }, emptyText && translate(emptyText, {\n    _: emptyText\n  })) : null : React.createElement(NonEmptyReferenceField, __assign({}, rest, {\n    link: link,\n    emptyText: emptyText,\n    record: record,\n    id: id\n  }));\n};\nReferenceField.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  cellClassName: PropTypes.string,\n  headerClassName: PropTypes.string,\n  label: fieldPropTypes.label,\n  record: PropTypes.any,\n  reference: PropTypes.string.isRequired,\n  resource: PropTypes.string,\n  sortBy: PropTypes.string,\n  sortByOrder: fieldPropTypes.sortByOrder,\n  source: PropTypes.string.isRequired,\n  translateChoice: PropTypes.oneOfType([PropTypes.func, PropTypes.bool]),\n  // @ts-ignore\n  link: PropTypes.oneOfType([PropTypes.string, PropTypes.bool, PropTypes.func])\n};\n/**\n * This intermediate component is made necessary by the useReference hook,\n * which cannot be called conditionally when get(record, source) is empty.\n */\nexport var NonEmptyReferenceField = function (_a) {\n  var children = _a.children,\n    id = _a.id,\n    reference = _a.reference,\n    queryOptions = _a.queryOptions,\n    link = _a.link,\n    props = __rest(_a, [\"children\", \"id\", \"reference\", \"queryOptions\", \"link\"]);\n  return React.createElement(ResourceContextProvider, {\n    value: reference\n  }, React.createElement(PureReferenceFieldView, __assign({\n    reference: reference\n  }, props, useReference({\n    reference: reference,\n    id: id,\n    options: queryOptions\n  }), {\n    resourceLinkPath: link\n  }), children));\n};\n// useful to prevent click bubbling in a datagrid with rowClick\nvar stopPropagation = function (e) {\n  return e.stopPropagation();\n};\nexport var ReferenceFieldView = function (props) {\n  var children = props.children,\n    className = props.className,\n    emptyText = props.emptyText,\n    error = props.error,\n    isLoading = props.isLoading,\n    reference = props.reference,\n    referenceRecord = props.referenceRecord,\n    resourceLinkPath = props.resourceLinkPath,\n    sx = props.sx;\n  var getRecordRepresentation = useGetRecordRepresentation(reference);\n  var translate = useTranslate();\n  var createPath = useCreatePath();\n  var resourceDefinition = useResourceDefinition({\n    resource: reference\n  });\n  if (error) {\n    return /* eslint-disable jsx-a11y/role-supports-aria-props */React.createElement(ErrorIcon, {\n      \"aria-errormessage\": error.message ? error.message : error,\n      role: \"presentation\",\n      color: \"error\",\n      fontSize: \"small\"\n    })\n    /* eslint-enable */;\n  }\n  if (isLoading) {\n    return React.createElement(LinearProgress, null);\n  }\n  if (!referenceRecord) {\n    return emptyText ? React.createElement(React.Fragment, null, emptyText && translate(emptyText, {\n      _: emptyText\n    })) : null;\n  }\n  var link = resourceLinkPath === false || resourceLinkPath === 'edit' && !resourceDefinition.hasEdit || resourceLinkPath === 'show' && !resourceDefinition.hasShow ? false : createPath({\n    resource: reference,\n    id: referenceRecord.id,\n    type: typeof resourceLinkPath === 'function' ? resourceLinkPath(referenceRecord, reference) : resourceLinkPath\n  });\n  var child = children || React.createElement(Typography, {\n    component: \"span\",\n    variant: \"body2\"\n  }, getRecordRepresentation(referenceRecord));\n  if (link) {\n    return React.createElement(Root, {\n      className: className,\n      sx: sx\n    }, React.createElement(RecordContextProvider, {\n      value: referenceRecord\n    }, React.createElement(Link, {\n      to: link,\n      className: ReferenceFieldClasses.link,\n      onClick: stopPropagation,\n      state: {\n        _scrollToTop: true\n      }\n    }, child)));\n  }\n  return React.createElement(Root, {\n    className: className,\n    sx: sx\n  }, React.createElement(RecordContextProvider, {\n    value: referenceRecord\n  }, child));\n};\nReferenceFieldView.propTypes = {\n  children: PropTypes.element,\n  className: PropTypes.string,\n  isLoading: PropTypes.bool,\n  record: PropTypes.any,\n  reference: PropTypes.string,\n  referenceRecord: PropTypes.any,\n  resource: PropTypes.string,\n  // @ts-ignore\n  resourceLinkPath: PropTypes.oneOfType([PropTypes.string, PropTypes.bool, PropTypes.func]).isRequired,\n  source: PropTypes.string,\n  translateChoice: PropTypes.oneOfType([PropTypes.func, PropTypes.bool])\n};\nvar PureReferenceFieldView = genericMemo(ReferenceFieldView);\nvar PREFIX = 'RaReferenceField';\nexport var ReferenceFieldClasses = {\n  link: \"\".concat(PREFIX, \"-link\")\n};\nvar Root = styled('span', {\n  name: PREFIX,\n  overridesResolver: function (props, styles) {\n    return styles.root;\n  }\n})(function (_a) {\n  var _b;\n  var theme = _a.theme;\n  return _b = {\n    lineHeight: 'initial'\n  }, _b[\"& .\".concat(ReferenceFieldClasses.link)] = {\n    '& > *': {\n      color: theme.palette.primary.main\n    }\n  }, _b;\n});","map":{"version":3,"names":["React","PropTypes","get","Typography","styled","ErrorIcon","useReference","ResourceContextProvider","RecordContextProvider","useRecordContext","useCreatePath","useGetRecordRepresentation","useResourceDefinition","useTranslate","LinearProgress","Link","fieldPropTypes","genericMemo","ReferenceField","props","source","emptyText","_a","link","rest","__rest","record","id","translate","createElement","component","variant","_","NonEmptyReferenceField","__assign","propTypes","children","node","className","string","cellClassName","headerClassName","label","any","reference","isRequired","resource","sortBy","sortByOrder","translateChoice","oneOfType","func","bool","queryOptions","value","PureReferenceFieldView","options","resourceLinkPath","stopPropagation","e","ReferenceFieldView","error","isLoading","referenceRecord","sx","getRecordRepresentation","createPath","resourceDefinition","message","role","color","fontSize","Fragment","hasEdit","hasShow","type","child","Root","to","ReferenceFieldClasses","onClick","state","_scrollToTop","element","PREFIX","concat","name","overridesResolver","styles","root","theme","_b","lineHeight","palette","primary","main"],"sources":["../../../src/field/ReferenceField.tsx"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}